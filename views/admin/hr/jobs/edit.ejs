<%- include('../../../partials/admin_header') %>
    <div class="mb-6 flex items-center justify-between">
        <div>
            <h1 class="text-2xl font-bold text-gray-900">Edit Job</h1>
            <p class="text-sm text-gray-500">Update details and application schema.</p>
        </div>
        <a href="/careers/<%= job.slug %>" class="btn btn-sm btn-secondary">View Public</a>
    </div>

    <form action="/admin/hr/jobs/<%= job.id %>/update" method="POST" class="bg-white border border-gray-200 rounded-xl p-6 shadow-sm space-y-6">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
        <div class="grid md:grid-cols-2 gap-4">
            <div>
                <label class="text-xs font-medium text-gray-600">Title</label>
                <input name="title" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" value="<%= job.title %>" required>
            </div>
            <div>
                <label class="text-xs font-medium text-gray-600">Slug</label>
                <input name="slug" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" value="<%= job.slug %>">
            </div>
            <div class="md:col-span-2">
                <label class="text-xs font-medium text-gray-600">Summary</label>
                <input name="summary" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" value="<%= job.summary %>" required>
            </div>
            <div class="md:col-span-2">
                <label class="text-xs font-medium text-gray-600">Description</label>
                <textarea name="description" rows="8" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" required><%= job.description %></textarea>
            </div>
        </div>
        <div class="grid md:grid-cols-3 gap-4">
            <div>
                <label class="text-xs font-medium text-gray-600">Location</label>
                <input name="location" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" value="<%= job.location || '' %>">
            </div>
            <div>
                <label class="text-xs font-medium text-gray-600">Location Type</label>
                <select name="location_type" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm">
                    <option value="REMOTE" <%= job.location_type === 'REMOTE' ? 'selected' : '' %>>Remote</option>
                    <option value="ONSITE" <%= job.location_type === 'ONSITE' ? 'selected' : '' %>>On-site</option>
                    <option value="HYBRID" <%= job.location_type === 'HYBRID' ? 'selected' : '' %>>Hybrid</option>
                </select>
            </div>
            <div>
                <label class="text-xs font-medium text-gray-600">Employment Type</label>
                <select name="employment_type" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm">
                    <option value="FULL_TIME" <%= job.employment_type === 'FULL_TIME' ? 'selected' : '' %>>Full-time</option>
                    <option value="PART_TIME" <%= job.employment_type === 'PART_TIME' ? 'selected' : '' %>>Part-time</option>
                    <option value="CONTRACT" <%= job.employment_type === 'CONTRACT' ? 'selected' : '' %>>Contract</option>
                    <option value="INTERN" <%= job.employment_type === 'INTERN' ? 'selected' : '' %>>Intern</option>
                    <option value="TEMP" <%= job.employment_type === 'TEMP' ? 'selected' : '' %>>Temp</option>
                </select>
            </div>
            <div>
                <label class="text-xs font-medium text-gray-600">Department</label>
                <input name="department" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" value="<%= job.department || '' %>">
            </div>
            <div>
                <label class="text-xs font-medium text-gray-600">Seniority</label>
                <input name="seniority" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm" value="<%= job.seniority || '' %>">
            </div>
            <div>
                <label class="text-xs font-medium text-gray-600">Status</label>
                <select name="status" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-sm">
                    <option value="DRAFT" <%= job.status === 'DRAFT' ? 'selected' : '' %>>Draft</option>
                    <option value="PUBLISHED" <%= job.status === 'PUBLISHED' ? 'selected' : '' %>>Published</option>
                    <option value="CLOSED" <%= job.status === 'CLOSED' ? 'selected' : '' %>>Closed</option>
                </select>
            </div>
        </div>
        <div>
            <label class="text-xs font-medium text-gray-600">Application Questions (JSON)</label>
            <textarea name="application_schema" rows="10" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-xs font-mono"><%= questions %></textarea>
        </div>
        <div>
            <label class="text-xs font-medium text-gray-600">Review Rubric (JSON)</label>
            <textarea name="review_rubric" rows="8" class="mt-1 w-full px-3 py-2 border border-gray-300 rounded text-xs font-mono"><%= rubric %></textarea>
            <div class="text-[11px] text-gray-400 mt-1">Weighted criteria for interviewer scoring (0-5 per line).</div>
        </div>
        <label class="inline-flex items-center gap-2 text-sm text-gray-600">
            <input type="checkbox" name="featured" <%= job.featured ? 'checked' : '' %>>
            Feature on careers page
        </label>
        <div class="text-right">
            <button class="btn btn-sm btn-primary">Save Changes</button>
        </div>
    </form>
<%- include('../../../partials/admin_footer') %>
