<nav class="sticky top-0 z-50 w-full border-b border-border bg-surface/80 backdrop-blur supports-[backdrop-filter]:bg-surface/60" x-data="{ open: false }">
    <% if (typeof settings !== 'undefined' && settings['global_alert']) { %>
        <div class="bg-indigo-600 text-white text-center text-xs font-bold py-2 px-4">
            <%= settings['global_alert'] %>
        </div>
    <% } %>
    <div class="container flex h-14 items-center">
        <div class="mr-4 hidden md:flex">
            <a href="/" class="mr-6 flex items-center space-x-2">
                <span class="hidden font-bold sm:inline-block text-primary">LLM Arena</span>
            </a>
            <nav class="flex items-center space-x-6 text-sm font-medium">
                <a href="/how-it-works" class="transition-colors hover:text-foreground/80 text-secondary <%= (typeof path !== 'undefined' && path === '/how-it-works') ? 'text-accent' : '' %>">How It Works</a>
                <a href="/benchmarks" class="transition-colors hover:text-foreground/80 text-secondary <%= (typeof path !== 'undefined' && path === '/benchmarks') ? 'text-accent' : '' %>">Benchmarks</a>
                <a href="/methodology" class="transition-colors hover:text-foreground/80 text-secondary <%= (typeof path !== 'undefined' && path === '/methodology') ? 'text-accent' : '' %>">Methodology</a>
                <a href="/use-cases" class="transition-colors hover:text-foreground/80 text-secondary <%= (typeof path !== 'undefined' && path === '/use-cases') ? 'text-accent' : '' %>">Use Cases</a>
                <a href="/about" class="transition-colors hover:text-foreground/80 text-secondary <%= (typeof path !== 'undefined' && path === '/about') ? 'text-accent' : '' %>">About</a>
                <a href="/docs" class="transition-colors hover:text-foreground/80 text-secondary <%= (typeof path !== 'undefined' && path === '/docs') ? 'text-accent' : '' %>">Docs</a>
                <% if (user && typeof can === 'function' && can('admin.access')) { %>
                    <a href="/admin" class="text-purple-600 font-bold hover:text-purple-800 flex items-center gap-1">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
                        Admin
                    </a>
                <% } %>
            </nav>
        </div>
        <div class="flex flex-1 items-center justify-between space-x-2 md:justify-end">
            <div class="flex items-center md:hidden">
                <a href="/" class="flex items-center space-x-2">
                    <span class="font-bold text-primary">LLM Arena</span>
                </a>
            </div>
            <div class="w-full flex-1 md:w-auto md:flex-none">
                <!-- Search could go here -->
            </div>
            <nav class="hidden md:flex items-center space-x-2">
                <a href="/matches" class="btn btn-sm btn-ghost">
                    View Live Matches
                </a>
                
                <% if (user) { %>
                    <div class="flex items-center gap-2 border-l border-border pl-4 ml-2">
                        <a href="/account" class="group flex items-center gap-2 transition-opacity hover:opacity-80">
                            <% if (user.avatar_url) { %>
                                <img src="<%= user.avatar_url %>" alt="Profile" class="w-8 h-8 rounded-full border border-border object-cover shadow-sm group-hover:ring-2 group-hover:ring-accent group-hover:ring-offset-1 transition-all">
                            <% } else { %>
                                <div class="w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600 border border-border">
                                    <%= user.email.charAt(0).toUpperCase() %>
                                </div>
                            <% } %>
                        </a>
                        <form action="/auth/logout" method="POST" class="inline">
                            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                            <button class="btn btn-sm btn-ghost text-xs text-secondary hover:text-red-600">Sign Out</button>
                        </form>
                    </div>
                <% } else { %>
                    <a href="/auth/login" class="btn btn-sm btn-primary">
                        Sign In
                    </a>
                <% } %>
            </nav>
            <button type="button" class="md:hidden inline-flex items-center justify-center rounded-md border border-border px-3 py-2 text-xs font-semibold uppercase tracking-widest text-secondary hover:text-foreground" @click="open = !open" :aria-expanded="open.toString()">
                <span x-text="open ? 'Close' : 'Menu'"></span>
            </button>
        </div>
    </div>
    <div x-show="open" x-cloak x-transition class="md:hidden border-t border-border bg-gradient-to-br from-slate-900/95 via-slate-800/95 to-emerald-900/80 text-white">
        <div class="container py-4 space-y-4">
            <div class="grid gap-3 text-sm font-semibold">
                <a href="/how-it-works" class="uppercase tracking-widest text-xs text-white/70 hover:text-white">How It Works</a>
                <a href="/benchmarks" class="uppercase tracking-widest text-xs text-white/70 hover:text-white">Benchmarks</a>
                <a href="/methodology" class="uppercase tracking-widest text-xs text-white/70 hover:text-white">Methodology</a>
                <a href="/use-cases" class="uppercase tracking-widest text-xs text-white/70 hover:text-white">Use Cases</a>
                <a href="/about" class="uppercase tracking-widest text-xs text-white/70 hover:text-white">About</a>
                <a href="/docs" class="uppercase tracking-widest text-xs text-white/70 hover:text-white">Docs</a>
                <% if (user && typeof can === 'function' && can('admin.access')) { %>
                    <a href="/admin" class="uppercase tracking-widest text-xs text-emerald-200 hover:text-white">Admin</a>
                <% } %>
            </div>
            <div class="flex flex-col gap-3">
                <a href="/matches" class="btn btn-sm btn-ghost bg-white/10 text-white border border-white/20">
                    View Live Matches
                </a>
                <% if (user) { %>
                    <a href="/account" class="flex items-center gap-3 rounded-md bg-white/10 px-3 py-2">
                        <% if (user.avatar_url) { %>
                            <img src="<%= user.avatar_url %>" alt="Profile" class="w-8 h-8 rounded-full border border-white/20 object-cover">
                        <% } else { %>
                            <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-xs font-bold text-white/80 border border-white/20">
                                <%= user.email.charAt(0).toUpperCase() %>
                            </div>
                        <% } %>
                        <span class="text-xs text-white/80">Account</span>
                    </a>
                    <form action="/auth/logout" method="POST" class="inline">
                        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                        <button class="btn btn-sm btn-ghost w-full bg-white/10 text-white border border-white/20">Sign Out</button>
                    </form>
                <% } else { %>
                    <a href="/auth/login" class="btn btn-sm btn-primary w-full">Sign In</a>
                <% } %>
            </div>
        </div>
    </div>
</nav>
